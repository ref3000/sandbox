<!DOCTYPE html>
<html>
<head>
<title>アネモネ</title>
<meta name="viewport" content="width=320,user-scalable=no">
<style>
  html, body, div, span, button {
    margin: 0;
    padding: 0;
  }
  header{
    background: rgb(255, 197, 197);
    position: fixed;
    width: 320px;
    height: 30px;
  }
  span {
    display: inline-block;
    text-align: center;
  }
  .rt {
    width: 13px;
    margin-top: 5px;
    font-size: 12px;
  }
  .result {
    width: 34px;
    margin-top: 5px;
    font-size: 12px;
    font-weight: bold;
  }
  .header-back {
    height: 30px;
  }
  .tile {
    width: 320px;
  }
  .title {
    font-size: 16px;
    width: 160px;
  }
  .inc-button {
    width: 40px;
    height: 40px;
    font-size: 30px;
  }
  .dec-button {
    width: 40px;
    height: 40px;
    font-size: 30px;
  }
  .count {
    font-size: 30px;
    width: 50px;
  }
</style>
</head>
<body>
<script>
  var data = [
["区間後初MIS スカイ",0.500,0.400,0.600,0.400,0.600,0.500],
["区間後初MIS ペイント",0.500,0.600,0.400,0.600,0.400,0.500],
["通常弱チェ MIS当選 ",0.359,0.379,0.363,0.398,0.375,0.445],
["通常弱チェ MIS非当選 ",0.641,0.621,0.637,0.602,0.625,0.555],
["通常スイカ MIS当選 ",0.008,0.027,0.012,0.055,0.023,0.070],
["通常スイカ MIS非当選 ",0.992,0.973,0.988,0.945,0.977,0.930],
["通常弱チャ目 MIS当選 ",0.250,0.254,0.258,0.281,0.313,0.336],
["通常弱チャ目 MIS非当選 ",0.750,0.746,0.742,0.719,0.687,0.664],
["通常弱チェMIS 戦艦or確定",0.016,0.016,0.024,0.039,0.071,0.094],
["通常弱チェMIS 上記以外",0.984,0.984,0.976,0.961,0.929,0.906],
["通常弱チャ目MIS 戦艦or確定",0.031,0.031,0.039,0.054,0.090,0.110],
["通常弱チャ目MIS 上記以外",0.969,0.969,0.961,0.946,0.910,0.890],
["MIS終了後集中移行 当選",0.164,0.195,0.168,0.215,0.188,0.238],
["MIS終了後集中移行 非当選",0.836,0.805,0.832,0.785,0.812,0.762],
["集中notレア役MIS 戦艦or確定",0.020,0.020,0.028,0.043,0.067,0.090],
["集中notレア役MIS 上記以外",0.980,0.980,0.972,0.957,0.933,0.910],
["通常弱チャ目高確移行 +10G",0.016,0.016,0.020,0.031,0.047,0.055],
["通常弱チャ目高確移行 +20G",0.051,0.055,0.055,0.070,0.102,0.109],
["通常弱チャ目高確移行 +30G",0.016,0.016,0.020,0.023,0.047,0.086],
["通常弱チャ目高確移行 非当選",0.917,0.913,0.905,0.876,0.804,0.750],
["通常モード(33/66/99G)MIS 当選",0.930,0.883,0.922,0.863,0.914,0.855],
["通常モード(33/66/99G)MIS 非当選",0.070,0.117,0.078,0.137,0.086,0.145],
["RB後(33/66/99G)MIS 当選",0.300,0.400,0.300,0.400,0.300,0.400],
["RB後(33/66/99G)MIS 非当選",0.700,0.600,0.700,0.600,0.700,0.600],
["当選 BB",0.595,0.589,0.623,0.623,0.680,0.639],
["当選 RB",0.405,0.411,0.377,0.377,0.320,0.361],
["RB→BB昇格 当選",0.127,0.150,0.150,0.183,0.207,0.207],
["RB→BB昇格 非当選",0.873,0.850,0.850,0.817,0.793,0.793],
["RB→BB昇格 1ベル(残9ベル)",0.000,0.000,0.000,0.000,0.000,1.000],
["RB→BB昇格 3ベル(残7ベル)",0.000,0.000,0.000,1.000,1.000,1.000],
["RBキャラ紹介 設定1否定",0.000,1.000,1.000,1.000,1.000,1.000],
["RBキャラ紹介 設定2否定",1.000,0.000,1.000,1.000,1.000,1.000],
["RBキャラ紹介 設定4以上",0.000,0.000,0.000,1.000,1.000,1.000],
["RBキャラ紹介 設定5以上",0.000,0.000,0.000,0.000,1.000,1.000],
["RBキャラ紹介 設定6濃厚",0.000,0.000,0.000,0.000,0.000,1.000],
["終了画面 横向き",0.512,0.368,0.492,0.307,0.420,0.297],
["終了画面 こちら向き",0.374,0.506,0.356,0.423,0.305,0.414],
["終了画面 手を振る",0.100,0.100,0.100,0.199,0.199,0.199],
["終了画面 サムズアップ",0.012,0.024,0.051,0.057,0.061,0.069],
["終了画面 ドミニク",0.000,0.000,0.000,0.012,0.012,0.009],
["終了画面 スーパー6",0.000,0.000,0.000,0.000,0.000,0.010],
["ダメージ 4560",0.000,0.000,0.000,1.000,1.000,1.000],
["ダメージ 6666",0.000,0.000,0.000,0.000,0.000,1.000],
["ダメージ 7777",0.000,0.000,0.000,0.000,1.000,1.000],
["ダメージ 9999",0.000,1.000,1.000,1.000,1.000,1.000],
["獲得枚数 174枚",0.000,1.000,1.000,1.000,1.000,1.000],
["獲得枚数 246枚",0.000,1.000,0.000,1.000,0.000,1.000],
["獲得枚数 256枚",0.000,1.000,0.000,0.000,1.000,1.000],
["獲得枚数 274枚",1.000,0.000,1.000,1.000,1.000,1.000],
["獲得枚数 331枚",0.000,0.000,0.000,0.000,0.000,1.000],
["獲得枚数 374枚",1.000,1.000,0.000,1.000,1.000,1.000],
["獲得枚数 456枚",0.000,0.000,0.000,1.000,1.000,1.000],
["獲得枚数 474枚",1.000,1.000,1.000,0.000,1.000,1.000],
["獲得枚数 666枚",0.000,0.000,0.000,0.000,0.000,1.000],
["サミートロフィー 銅",0.000,1.000,1.000,1.000,1.000,1.000],
["サミートロフィー 銀",0.000,0.000,1.000,1.000,1.000,1.000],
["サミートロフィー 金",0.000,0.000,0.000,1.000,1.000,1.000],
["サミートロフィー キリン",0.000,0.000,0.000,0.000,1.000,1.000],
["サミートロフィー 虹",0.000,0.000,0.000,0.000,0.000,1.000],
  ]
  var c = []
  function dec(i) {
    c[i]--
    update()
  }
  function inc(i) {
    c[i]++
    update()
  }
  function update() {
    for (i = 0; i < data.length; i++) {
      var elm = document.getElementById("c" + i)
      elm.textContent = c[i]
      localStorage.setItem('c' + i, c[i]);
    }

    var p = [1, 1, 1, 1, 1, 1];
    for (i = 0; i < data.length; i++) {
      if (c[i] < 1) continue;
      for (j = 0; j < 6; j++) {
        for (k = 0; k < c[i]; k++) p[j] *= data[i][j+1];
      }
    }
    var sum = 0;
    for (i = 0; i < 6; i++) sum += p[i];
    for (i = 0; i < 6; i++) {
      document.getElementById("r" + (i+1)).textContent = Math.round(p[i]*1000/sum)/10+"%";
    }
  }
  window.onload = function() {
    var area = document.getElementById("area");
    for (i = 0; i < data.length; i++) {
      var tile = document.createElement("div");
      tile.className = "tile";
      var t = document.createElement("span");
      t.id = "t" + i;
      t.className = "title";
      t.textContent = data[i][0];
      var db = document.createElement("button");
      db.id = "db" + i;
      db.className = "dec-button";
      db.onclick = function(e) { dec(e.target.id.slice(2) - 0) };
      db.textContent = "-";
      var ib = document.createElement("button");
      ib.id = "ib" + i;
      ib.className = "inc-button";
      ib.onclick = function(e) { inc(e.target.id.slice(2) - 0) };
      ib.textContent = "+";
      var count = document.createElement("span");
      count.id = "c" + i;
      count.className = "count";
      tile.appendChild(t);
      tile.appendChild(db);
      tile.appendChild(ib);
      tile.appendChild(count);
      area.appendChild(tile);
    }
    for (i = 0; i < data.length; i++) {
      c[i] = localStorage.getItem('c' + i) || 0;
    }
    update()
  }
  function reset() {
    for (i = 0; i < data.length; i++) c[i] = 0;
    update();
  }
</script>
<header>
  <span class="rt">1:</span><span id="r1" class="result"></span>
  <span class="rt">2:</span><span id="r2" class="result"></span>
  <span class="rt">3:</span><span id="r3" class="result"></span>
  <span class="rt">4:</span><span id="r4" class="result"></span>
  <span class="rt">5:</span><span id="r5" class="result"></span>
  <span class="rt">6:</span><span id="r6" class="result"></span>
</header>
<div class="header-back"></div>
<div id="area">
</div>
<button onclick="reset()">全てリセット</button>
</body>
</html>
